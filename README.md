# Project Setup Guide

This guide explains how to set up and run the project, including Google OAuth integration and Supabase database configuration.

---

## 1. Register Google OAuth Application

1. Go to the [Google Developers Console](https://console.developers.google.com/).
2. Create a new project or select an existing one.
3. Navigate to **APIs & Services → OAuth consent screen**, and configure your application details.
4. Go to **Credentials → Create Credentials → OAuth Client ID**.
5. Select **Web application** and provide authorized redirect URIs, e.g., `https://your-site.com/api/auth/callback`.
6. Save your **Client ID** and **Client Secret**; these will be used in environment variables.

---

## 2. Register Supabase Project and Database

1. Go to [Supabase](https://supabase.com/) and create an account if you don’t have one.
2. Create a new project and note the **Project URL** and **API Key**.
3. Navigate to the SQL editor and run the following script to create the `todos` table:

```sql
create table if not exists public.todos (
  id bigint generated by default as identity primary key,
  created_by text not null,
  item text not null,
  created_at timestamptz not null default now()
);

-- Optional: create an index for faster queries by user
create index if not exists todos_created_by_idx on public.todos(created_by);
```

---

## 3. Configure Environment Variables

Create a `.env.local` file in the root of your project with the following variables:

```env
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_KEY=

NEXT_PUBLIC_GOOGLE_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=

NEXT_PUBLIC_SITE_URL=
```

> Fill in the values with the credentials obtained from Google Developers Console and Supabase.

---

## 4. Install Dependencies and Run

1. Install project dependencies:  
```bash
npm install
```

2. Start the development server:  
```bash
npm start
```

The application should now be accessible at `NEXT_PUBLIC_SITE_URL`.

---

This README covers all necessary steps to get the project running, including OAuth integration and database setup.


## 5. Notes
1. The Auth flow is extremely simplified for the sake of the demo. Use 3rd part authorization or handle access and refresh tokens manually together with the database. Here I only validate Google's ID token that is not enough for production.
2. I could use Google Auth with the set of tokens. But I would like to take the most of One Tap approach and if it failed, use the regular redirect flow.
 
